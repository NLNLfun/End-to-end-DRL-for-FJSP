# 柔性作业车间调度问题(FJSP)端到端深度强化学习系统功能说明

## 系统概述

本系统是一个基于深度强化学习的柔性作业车间调度问题(Flexible Job Shop Scheduling Problem, FJSP)求解框架。该系统采用端到端的多动作深度强化学习方法，无需预定义调度规则即可直接求解FJSP问题。

## 文档导航

- [系统功能说明.md](./系统功能说明.md) - 本文档，详细介绍系统功能和技术特性
- [README_中文.md](./README_中文.md) - 项目中文介绍和研究背景
- [安装使用指南.md](./安装使用指南.md) - 详细的安装配置和使用教程
- [README.md](./README.md) - 英文项目说明（原版）

## 主要功能模块

### 1. 训练模块 (FJSP_MultiPPO)

#### 核心功能：
- **多PPO算法训练**：采用多代理近端策略优化(Multi-PPO)算法训练调度策略
- **双actor网络架构**：分别学习作业选择和机器选择策略
- **图神经网络编码**：使用图同构网络(GIN)对析取图进行状态编码

#### 主要文件和功能：
- `PPOwithValue.py`: 主训练文件，实现多PPO算法框架
- `FJSP_Env.py`: FJSP环境仿真器，提供状态转移和奖励计算
- `validation.py`: 模型验证和测试功能
- `models/`: 神经网络模型目录
  - `PPO_Actor1.py`: 作业和机器选择的Actor网络
  - `graphcnn_congForSJSSP.py`: 图卷积神经网络
  - `attentionEncoder.py`: 注意力编码器

#### 训练能力：
- 支持随机生成的FJSP实例训练
- 可调节的网络参数和超参数
- 支持批量训练和验证
- 模型保存和加载功能

### 2. 真实世界验证模块 (FJSP_RealWorld)

#### 核心功能：
- **基准实例测试**：在标准FJSP基准实例上测试训练好的模型
- **实际问题求解**：处理真实工业调度问题
- **性能评估**：提供详细的调度性能指标

#### 主要文件和功能：
- `validation_realWorld.py`: 真实世界实例验证主文件
- `DataRead.py`: 标准FJSP实例数据读取
- `FJSSPinstances/`: 标准基准测试实例库
- `saved_network/`: 预训练模型存储

## 核心算法能力

### 1. 多动作决策
- **作业选择**：智能选择下一个要调度的作业操作
- **机器选择**：为选中的操作分配最优机器
- **协同优化**：两个决策子问题的联合优化

### 2. 图神经网络状态表示
- **析取图建模**：完整表示调度状态的先后约束和机器约束
- **特征提取**：提取操作处理时间、机器兼容性等数值信息
- **结构编码**：编码作业间和机器间的复杂关系

### 3. 强化学习优化
- **策略梯度**：使用PPO算法进行策略优化
- **价值函数**：估计状态价值用于优势函数计算
- **经验回放**：存储和重用训练经验

## 系统优势特性

### 1. 端到端学习
- 无需人工设计调度规则
- 直接从原始问题实例学习最优策略
- 自适应不同规模和特征的FJSP实例

### 2. 实时调度能力
- 快速推理，适合实时调度场景
- 不受实例规模限制
- 支持动态调度环境

### 3. 高质量解
- 在标准基准测试中表现优异
- 相比传统启发式方法有显著改进
- 计算效率高，求解时间短

## 使用方法

### 训练新模型：
```bash
cd FJSP_MultiPPO
python PPOwithValue.py
```

### 验证模型性能（随机实例）：
```bash
cd FJSP_MultiPPO  
python validation.py
```

### 测试真实世界实例：
```bash
cd FJSP_RealWorld
python validation_realWorld.py
```

## 技术参数

### 支持的问题规模：
- 作业数量：可配置
- 机器数量：可配置  
- 操作数量：根据作业和机器数量动态调整

### 网络架构：
- 图神经网络层数：可配置
- 隐藏层维度：可配置
- 注意力头数：可配置

### 训练参数：
- 学习率：可调节
- 批次大小：可配置
- 训练轮数：可设置
- 折扣因子：可调节

## 扩展应用

本系统框架可扩展应用于：
- 流水车间调度问题(Flow Shop Scheduling)
- 动态FJSP
- 带有序列依赖设置时间的FJSP
- 多目标FJSP优化
- 其他可用析取图表示的组合优化问题

## 研究背景

该系统基于以下研究论文：
*A Multi-action Deep Reinforcement Learning Framework for Flexible Job-shop Scheduling Problem*
发表于 Expert Systems with Applications, 2022

该框架为FJSP求解提供了一种全新的无模型深度强化学习方法，在解决大规模和实时FJSP方面具有重要意义。